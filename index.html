<!DOCTYPE html>

<html lang="fr"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Flappy Math Bird Login</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com/css2?family=Spline+Sans:wght@400;500;600;700;800&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#2bee6c",
                        "primary-dark": "#1ec957", // Darker shade for hover
                        "background-light": "#f6f8f6",
                        "background-dark": "#102216",
                        "sky-blue": "#d0f4ff", // Custom sky color
                        "sky-dark": "#1a3a4a", // Custom sky color for dark mode
                    },
                    fontFamily: {
                        "display": ["Spline Sans", "sans-serif"]
                    },
                    borderRadius: {"DEFAULT": "1rem", "lg": "2rem", "xl": "3rem", "2xl": "4rem", "full": "9999px"},
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'float-delayed': 'float 6s ease-in-out 3s infinite',
                        'drift': 'drift 20s linear infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-20px)' },
                        },
                        drift: {
                            '0%': { backgroundPosition: '0 0' },
                            '100%': { backgroundPosition: '100% 0' },
                        }
                    }
                },
            },
        }
    </script>
<style>
        /* Custom styles for cloud shapes */
        .cloud-shape {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 9999px;
            position: absolute;
        }
        .cloud-circle {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            position: absolute;
        }
        
        /* Bubbly text effect */
        .bubbly-text {
            text-shadow: 2px 2px 0px rgba(0,0,0,0.1);
        }
        
        /* Cute input focus ring */
        .focus-ring:focus-within {
            box-shadow: 0 0 0 4px rgba(43, 238, 108, 0.4);
            border-color: #2bee6c;
        }
    </style>
</head>
<body class="font-display bg-sky-blue dark:bg-sky-dark min-h-screen flex items-center justify-center relative overflow-hidden transition-colors duration-300">
<!-- Decorative Animated Clouds Background -->
<div class="absolute inset-0 overflow-hidden pointer-events-none z-0 opacity-60 dark:opacity-10">
<!-- Cloud 1 -->
<div class="absolute top-[10%] left-[5%] animate-float">
<div class="w-32 h-12 bg-white rounded-full relative">
<div class="w-16 h-16 bg-white rounded-full absolute -top-8 left-4"></div>
<div class="w-12 h-12 bg-white rounded-full absolute -top-4 right-4"></div>
</div>
</div>
<!-- Cloud 2 -->
<div class="absolute top-[20%] right-[10%] animate-float-delayed">
<div class="w-48 h-16 bg-white rounded-full relative">
<div class="w-20 h-20 bg-white rounded-full absolute -top-10 left-8"></div>
<div class="w-16 h-16 bg-white rounded-full absolute -top-6 right-8"></div>
</div>
</div>
<!-- Cloud 3 (Bottom) -->
<div class="absolute bottom-[10%] left-[20%] animate-float">
<div class="w-40 h-14 bg-white rounded-full relative">
<div class="w-16 h-16 bg-white rounded-full absolute -top-8 left-6"></div>
<div class="w-14 h-14 bg-white rounded-full absolute -top-5 right-6"></div>
</div>
</div>
</div>
<!-- Main Container -->
<main class="relative z-10 w-full max-w-md px-6">
<!-- Bird Mascot Peeking Over -->
<div class="flex justify-center -mb-10 relative z-20 animate-float">
<!-- Replacing actual image with a CSS/SVG composition for the bird to ensure it matches the prompt perfectly without external assets -->
<div class="w-24 h-24 relative">
<div class="w-20 h-20 bg-yellow-400 rounded-full absolute bottom-0 left-1/2 -translate-x-1/2 border-4 border-white shadow-lg flex items-center justify-center overflow-hidden">
<!-- Eyes -->
<div class="absolute top-4 left-3 w-5 h-5 bg-white rounded-full border-2 border-black">
<div class="w-2 h-2 bg-black rounded-full absolute top-1.5 right-0.5"></div>
</div>
<div class="absolute top-4 right-3 w-5 h-5 bg-white rounded-full border-2 border-black">
<div class="w-2 h-2 bg-black rounded-full absolute top-1.5 right-0.5"></div>
</div>
<!-- Beak -->
<div class="absolute top-9 left-1/2 -translate-x-1/2 w-5 h-5 bg-orange-500 rounded-md rotate-45 border-2 border-black/10"></div>
<!-- Belly -->
<div class="absolute -bottom-6 w-16 h-16 bg-yellow-200 rounded-full"></div>
</div>
<!-- Wings -->
<div class="absolute top-10 -left-1 w-6 h-9 bg-yellow-500 rounded-full -rotate-12 border-2 border-white"></div>
<div class="absolute top-10 -right-1 w-6 h-9 bg-yellow-500 rounded-full rotate-12 border-2 border-white"></div>
</div>
</div>
<!-- Login Card -->
<div class="bg-white dark:bg-slate-800 rounded-[2.5rem] p-6 pt-14 shadow-[0_20px_50px_rgba(8,_112,_184,_0.1)] dark:shadow-none border-4 border-white dark:border-slate-700 relative overflow-hidden">
<!-- Card Header -->
<div class="text-center mb-4">
<h1 class="font-display font-black text-3xl text-slate-800 dark:text-white bubbly-text tracking-tight mb-1">
<span class="text-sky-500">Flappy</span>
<span class="text-primary">Math</span>
<span class="text-yellow-400">Bird</span>
</h1>
<p class="text-slate-500 dark:text-slate-400 font-bold text-base">Résous &amp; vole !</p>
</div>
<!-- Login Form -->
<form class="space-y-3" onsubmit="event.preventDefault(); validateSecretCode();">
<div class="space-y-2">
<label class="block text-slate-700 dark:text-slate-300 font-bold ml-4 uppercase text-sm tracking-wider" for="player-name">Ton prénom</label>
<div class="relative focus-ring rounded-full transition-all duration-300">
<div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
<span class="material-icons-round text-slate-400 text-3xl">person</span>
</div>
<input class="block w-full pl-12 pr-4 py-3 bg-slate-100 dark:bg-slate-900 border-2 border-transparent text-slate-900 dark:text-white placeholder-slate-400 focus:outline-none rounded-full text-base font-bold font-display" id="player-name" placeholder="Ton prénom..." type="text" required maxlength="20"/>
</div>
</div>
<div class="space-y-2">
<label class="block text-slate-700 dark:text-slate-300 font-bold ml-4 uppercase text-sm tracking-wider" for="secret-code">Code secret</label>
<div class="relative focus-ring rounded-full transition-all duration-300">
<div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
<span class="material-icons-round text-slate-400 text-3xl">lock</span>
</div>
<input class="block w-full pl-12 pr-4 py-3 bg-slate-100 dark:bg-slate-900 border-2 border-transparent text-slate-900 dark:text-white placeholder-slate-400 focus:outline-none rounded-full text-base font-bold font-display" id="secret-code" placeholder="Code..." type="password"/>
</div>
</div>
<!-- Msg aide -->
<div class="transition-opacity duration-300 text-yellow-400 dark:text-yellow-500 px-4 py-3 rounded-xl flex items-center gap-2 text-sm font-bold" id="help-msg">
<span class="material-icons-round outline-text-lg">info_outline</span>
<span>Le code secret a été envoyé par mail à tes parents !</span> 
</div>
<!-- Error Message (Hidden by default) -->
<div class="opacity-0 transition-opacity duration-300 bg-red-100 dark:bg-red-900/30 text-red-500 dark:text-red-300 px-4 py-3 rounded-xl flex items-center gap-2 text-sm font-bold" id="error-msg">
<span class="material-icons-round text-lg">error_outline</span>
<span>Oups ce n'est pas le bon code.</span>
</div>
<button class="group w-full bg-primary hover:bg-primary-dark text-slate-900 dark:text-slate-900 py-3 px-6 rounded-full font-black text-xl shadow-lg shadow-primary/30 hover:shadow-primary/50 hover:-translate-y-1 transition-all duration-300 flex items-center justify-center gap-3" type="submit" id="submit-btn">
  <span>C'EST PARTI !</span>
  <span class="material-icons-round group-hover:translate-x-1 transition-transform">flight_takeoff</span>
</button>
</form>
<!-- Decorative Bottom Pattern -->
<div class="absolute bottom-0 left-0 w-full h-2 bg-gradient-to-r from-sky-400 via-primary to-yellow-400 opacity-50"></div>
</div>
<!-- Footer Links -->
<div class="mt-8 text-center">

</div>
</main>
<!-- Additional background decoration: Distant floating math symbols -->
<div class="absolute inset-0 pointer-events-none overflow-hidden z-0">
<div class="absolute top-1/4 left-10 text-6xl font-black text-sky-200 dark:text-sky-800 opacity-50 rotate-12 select-none">+</div>
<div class="absolute bottom-1/3 right-12 text-7xl font-black text-primary/20 opacity-50 -rotate-12 select-none">÷</div>
<div class="absolute top-20 right-1/4 text-5xl font-black text-yellow-200 dark:text-yellow-800/30 opacity-50 rotate-45 select-none">×</div>
<div class="absolute bottom-10 left-1/3 text-8xl font-black text-white/40 dark:text-white/5 opacity-50 -rotate-6 select-none">-</div>
</div>

<script>
async function validateSecretCode() {
  const code = document.getElementById('secret-code').value;
  const errorMsg = document.getElementById('error-msg');
  const submitBtn = document.getElementById('submit-btn');
  
  if (!code) {
    errorMsg.classList.remove('opacity-0');
    return;
  }

  // Désactiver le bouton pendant la requête
  submitBtn.disabled = true;

  try {
    const response = await fetch('/api/validate-code', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ code })
    });

    const data = await response.json();

    if (data.success) {
      // Sauvegarder le prénom du joueur
      const playerName = document.getElementById('player-name').value.trim();
      if (playerName) localStorage.setItem('playerName', playerName);
      // Code correct - redirection
      window.location.href = 'flappybird.html';
    } else {
      // Code incorrect - afficher l'erreur
      errorMsg.classList.remove('opacity-0');
    }
  } catch (error) {
    console.error('Erreur:', error);
    errorMsg.classList.remove('opacity-0');
  } finally {
    // Réactiver le bouton
    submitBtn.disabled = false;
  }
}
</script>
</body></html>